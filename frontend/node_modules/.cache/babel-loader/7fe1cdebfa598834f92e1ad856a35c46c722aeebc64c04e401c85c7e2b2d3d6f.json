{"ast":null,"code":"var _jsxFileName = \"/Users/lecher/Desktop/ByteBrighter/frontend/src/components/core/Dashboard/Settings/ChangeProfilePicture.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useRef, useState } from \"react\";\nimport { FiUpload } from \"react-icons/fi\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { updateDisplayPicture } from \"../../../../services/operations/SettingsAPI\";\nimport IconBtn from \"../../../common/IconBtn\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function ChangeProfilePicture() {\n  _s();\n  const {\n    token\n  } = useSelector(state => state.auth);\n  const {\n    user\n  } = useSelector(state => state.profile);\n  const dispatch = useDispatch();\n  const [loading, setLoading] = useState(false);\n  const [imageFile, setImageFile] = useState(null);\n  const [previewSource, setPreviewSource] = useState(null);\n  const fileInputRef = useRef(null);\n  const handleClick = () => {\n    fileInputRef.current.click();\n  };\n  const handleFileChange = e => {\n    const file = e.target.files[0];\n    // console.log(file)\n    if (file) {\n      setImageFile(file);\n      previewFile(file);\n    }\n  };\n  const previewFile = file => {\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n    reader.onloadend = () => {\n      setPreviewSource(reader.result);\n    };\n  };\n  const handleFileUpload = () => {\n    try {\n      console.log(\"uploading...\");\n      setLoading(true);\n      const formData = new FormData();\n      formData.append(\"displayPicture\", imageFile);\n      console.log(\"formdata\", formData);\n      dispatch(updateDisplayPicture(token, formData)).then(() => {\n        setLoading(false);\n      });\n    } catch (error) {\n      console.log(\"ERROR MESSAGE - \", error.message);\n    }\n  };\n  useEffect(() => {\n    if (imageFile) {\n      previewFile(imageFile);\n    }\n  }, [imageFile]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-between rounded-md border-[1px] border-richblack-700 bg-richblack-800 p-8 px-12 text-richblack-5\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-x-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: previewSource || (user === null || user === void 0 ? void 0 : user.image),\n          alt: `profile-${user === null || user === void 0 ? void 0 : user.firstName}`,\n          className: \"aspect-square w-[78px] rounded-full object-cover\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Change Profile Picture\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-row gap-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\",\n              ref: fileInputRef,\n              onChange: handleFileChange,\n              className: \"hidden\",\n              accept: \"image/png, image/gif, image/jpeg\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 72,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleClick,\n              disabled: loading,\n              className: \"cursor-pointer text-base rounded-md py-2 px-5 bg-richblack-50 text-richblack-900\",\n              children: \"Select\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleFileUpload,\n              className: \"flex items-center cursor-pointer gap-1 text-base font-medium text-richblack-50 bg-richblack-700 rounded-md px-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: \"Upload\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 89,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(FiUpload, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 90,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n_s(ChangeProfilePicture, \"xuMv0TOb+a0cMqqLaY2UpGX43HU=\", false, function () {\n  return [useSelector, useSelector, useDispatch];\n});\n_c = ChangeProfilePicture;\nvar _c;\n$RefreshReg$(_c, \"ChangeProfilePicture\");","map":{"version":3,"names":["useEffect","useRef","useState","FiUpload","useDispatch","useSelector","updateDisplayPicture","IconBtn","jsxDEV","_jsxDEV","Fragment","_Fragment","ChangeProfilePicture","_s","token","state","auth","user","profile","dispatch","loading","setLoading","imageFile","setImageFile","previewSource","setPreviewSource","fileInputRef","handleClick","current","click","handleFileChange","e","file","target","files","previewFile","reader","FileReader","readAsDataURL","onloadend","result","handleFileUpload","console","log","formData","FormData","append","then","error","message","children","className","src","image","alt","firstName","fileName","_jsxFileName","lineNumber","columnNumber","type","ref","onChange","accept","onClick","disabled","_c","$RefreshReg$"],"sources":["/Users/lecher/Desktop/ByteBrighter/frontend/src/components/core/Dashboard/Settings/ChangeProfilePicture.jsx"],"sourcesContent":["import { useEffect, useRef, useState } from \"react\";\nimport { FiUpload } from \"react-icons/fi\";\nimport { useDispatch, useSelector } from \"react-redux\";\n\nimport { updateDisplayPicture } from \"../../../../services/operations/SettingsAPI\";\nimport IconBtn from \"../../../common/IconBtn\";\n\nexport default function ChangeProfilePicture() {\n  const { token } = useSelector((state) => state.auth);\n  const { user } = useSelector((state) => state.profile);\n  const dispatch = useDispatch();\n\n  const [loading, setLoading] = useState(false);\n  const [imageFile, setImageFile] = useState(null);\n  const [previewSource, setPreviewSource] = useState(null);\n\n  const fileInputRef = useRef(null);\n\n  const handleClick = () => {\n    fileInputRef.current.click();\n  };\n\n  const handleFileChange = (e) => {\n    const file = e.target.files[0];\n    // console.log(file)\n    if (file) {\n      setImageFile(file);\n      previewFile(file);\n    }\n  };\n\n  const previewFile = (file) => {\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n    reader.onloadend = () => {\n      setPreviewSource(reader.result);\n    };\n  };\n\n  const handleFileUpload = () => {\n    try {\n      console.log(\"uploading...\");\n      setLoading(true);\n      const formData = new FormData();\n      formData.append(\"displayPicture\", imageFile);\n      console.log(\"formdata\", formData)\n      dispatch(updateDisplayPicture(token, formData)).then(() => {\n        setLoading(false);\n      });\n    } catch (error) {\n      console.log(\"ERROR MESSAGE - \", error.message);\n    }\n  };\n\n  useEffect(() => {\n    if (imageFile) {\n      previewFile(imageFile);\n    }\n  }, [imageFile]);\n  return (\n    <>\n      <div className=\"flex items-center justify-between rounded-md border-[1px] border-richblack-700 bg-richblack-800 p-8 px-12 text-richblack-5\">\n        <div className=\"flex items-center gap-x-4\">\n          <img\n            src={previewSource || user?.image}\n            alt={`profile-${user?.firstName}`}\n            className=\"aspect-square w-[78px] rounded-full object-cover\"\n          />\n          <div className=\"space-y-2\">\n            <p>Change Profile Picture</p>\n            <div className=\"flex flex-row gap-3\">\n              <input\n                type=\"file\"\n                ref={fileInputRef}\n                onChange={handleFileChange}\n                className=\"hidden\"\n                accept=\"image/png, image/gif, image/jpeg\"\n              />\n              <button\n                onClick={handleClick}\n                disabled={loading}\n                className=\"cursor-pointer text-base rounded-md py-2 px-5 bg-richblack-50 text-richblack-900\"\n              >\n                Select\n              </button>\n              <button \n              onClick={handleFileUpload}\n              className=\"flex items-center cursor-pointer gap-1 text-base font-medium text-richblack-50 bg-richblack-700 rounded-md px-3\">\n                <div>Upload</div>\n                <FiUpload/>\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}